<script setup>
import { ref } from "vue";
import { useEventStore } from './../../stores/eventStore.js';

const props = defineProps({
  event: Object,
});

const openDelete = ref(false);
const eventStore = useEventStore();

const deleteEvent = async () => {
  await eventStore.deleteEvent(props.event.id);
  openDelete.value = false;
};

</script>

<template>
  <div>
    <button
      class="px-2 py-3 mt-3 font-medium tracking-wide text-white focus:outline-none"
      @click="openDelete = true"
    >
      <div>
        <svg width="33" height="33" viewBox="0 0 33 33" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4.55351 6.14217L16.3413 8.44724L28.1291 10.7523C28.2337 10.7727 28.342 10.7507 28.4304 10.6913C28.5187 10.6318 28.5799 10.5397 28.6004 10.4352C28.6664 10.0979 28.6653 9.7508 28.5972 9.41387C28.529 9.07693 28.3952 8.75672 28.2033 8.47151C28.0114 8.18631 27.7652 7.94171 27.4787 7.75167C27.1923 7.56163 26.8712 7.42989 26.5338 7.36396L22.6223 6.59907L22.8276 5.54886C22.9724 4.80429 22.8158 4.03272 22.3924 3.40341C21.969 2.7741 21.3132 2.33846 20.5689 2.19205L14.7814 1.06032C14.0368 0.915598 13.2653 1.07213 12.636 1.49557C12.0066 1.91902 11.571 2.57479 11.4246 3.31903L11.2192 4.36923L7.3077 3.60434C6.97034 3.53833 6.62328 3.53942 6.28634 3.60755C5.9494 3.67569 5.62918 3.80953 5.34398 4.00144C5.05877 4.19334 4.81417 4.43956 4.62413 4.72601C4.43409 5.01247 4.30235 5.33355 4.23642 5.67093C4.21606 5.77546 4.23801 5.8838 4.29747 5.97216C4.35692 6.06051 4.44901 6.12166 4.55351 6.14217ZM15.4861 3.03267L19.1732 3.75367C19.7278 3.86211 20.2165 4.18641 20.532 4.65523C20.8475 5.12405 20.9638 5.69898 20.8553 6.25354L16.9208 5.48415L12.9862 4.71477C13.0399 4.44017 13.1472 4.17885 13.3019 3.9457C13.4565 3.71256 13.6556 3.51217 13.8878 3.35597C14.1199 3.19978 14.3805 3.09083 14.6548 3.03536C14.929 2.97988 15.2115 2.97897 15.4861 3.03267Z" fill="#2E79BD"/>
<path d="M28.5112 12.7104H4.48904C4.38254 12.7105 4.28043 12.7529 4.20512 12.8282C4.12982 12.9035 4.08748 13.0056 4.0874 13.1121V14.6355C4.0874 14.8571 8.24921 30.3756 8.24921 30.3756C8.30921 31.0892 8.63502 31.7543 9.16212 32.2391C9.68922 32.7238 10.3792 32.993 11.0953 32.9932H21.9049C22.621 32.993 23.311 32.7238 23.8381 32.2391C24.3652 31.7543 24.691 31.0892 24.751 30.3756C24.751 30.3756 28.9128 14.8571 28.9128 14.6355V13.1121C28.9127 13.0056 28.8704 12.9035 28.7951 12.8282C28.7198 12.7529 28.6177 12.7105 28.5112 12.7104ZM12.5438 29.267C12.4584 29.2899 12.3693 29.2958 12.2817 29.2843C12.194 29.2727 12.1095 29.244 12.0329 29.1997C11.9563 29.1555 11.8893 29.0965 11.8355 29.0263C11.7818 28.9561 11.7424 28.876 11.7197 28.7905C10.5744 24.5074 9.40972 20.1459 8.64775 17.2587C8.6022 17.0861 8.62707 16.9025 8.71691 16.7482C8.80674 16.5939 8.95418 16.4817 9.12678 16.4361C9.29937 16.3906 9.483 16.4155 9.63726 16.5053C9.79151 16.5951 9.90377 16.7426 9.94932 16.9152C10.7109 19.8005 11.8754 24.1608 13.0201 28.4429C13.043 28.5283 13.0488 28.6173 13.0372 28.7049C13.0256 28.7926 12.9969 28.8771 12.9527 28.9536C12.9084 29.0301 12.8496 29.0972 12.7794 29.151C12.7093 29.2048 12.6292 29.2442 12.5438 29.267ZM17.1724 28.6167C17.172 28.795 17.1009 28.9659 16.9747 29.0918C16.8485 29.2178 16.6775 29.2885 16.4992 29.2885C16.3209 29.2885 16.1499 29.2178 16.0237 29.0918C15.8975 28.9659 15.8264 28.795 15.8261 28.6167V17.0869C15.8264 16.9086 15.8975 16.7377 16.0237 16.6118C16.1499 16.4858 16.3209 16.4151 16.4992 16.4151C16.6775 16.4151 16.8485 16.4858 16.9747 16.6118C17.1009 16.7377 17.172 16.9086 17.1724 17.0869V28.6167ZM24.3524 17.2587C23.556 20.2765 22.2924 25.0068 21.2805 28.7906C21.2577 28.8761 21.2183 28.9562 21.1645 29.0264C21.1107 29.0966 21.0437 29.1555 20.9671 29.1997C20.8906 29.244 20.806 29.2728 20.7184 29.2844C20.6307 29.2959 20.5416 29.2902 20.4562 29.2673C20.3708 29.2445 20.2907 29.205 20.2206 29.1512C20.1504 29.0974 20.0915 29.0303 20.0473 28.9537C20.0031 28.8771 19.9744 28.7926 19.9628 28.7049C19.9513 28.6173 19.9571 28.5282 19.98 28.4428C20.9916 24.66 22.2549 19.9311 23.0508 16.9152C23.0734 16.8297 23.1126 16.7495 23.1661 16.6792C23.2196 16.6089 23.2865 16.5498 23.3629 16.5053C23.4393 16.4608 23.5237 16.4318 23.6112 16.42C23.6988 16.4081 23.7879 16.4136 23.8734 16.4361C23.9588 16.4587 24.039 16.4979 24.1093 16.5514C24.1797 16.605 24.2388 16.6718 24.2832 16.7482C24.3277 16.8246 24.3567 16.909 24.3686 16.9966C24.3805 17.0842 24.3749 17.1732 24.3524 17.2587Z" fill="#2D3E50"/>
</svg>

      </div>
    </button>

    <div
      :class="`modal ${
        !openDelete && 'opacity-0 pointer-events-none'
      } z-50 fixed w-full h-full top-0 left-0 flex items-center justify-center`"
    >
      <div
        class="absolute w-full h-full bg-gray-900 opacity-50 modal-overlay"
        @click="openDelete = false"
      />

      <div
        class="z-50 w-11/12 mx-auto overflow-y-auto bg-white rounded-xl shadow-lg modal-container md:max-w-md"
      >
        <div
          class="absolute top-0 right-0 z-50 flex flex-col items-center mt-4 mr-4 text-sm text-white cursor-pointer modal-close"
        >
          <svg
            class="text-white fill-current"
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="18"
            viewBox="0 0 18 18"
          >
            <path
              d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"
            />
          </svg>
          <span class="text-sm">(Esc)</span>
        </div>

        
        <div class="px-6 py-4 text-left modal-content">
          <!-- Title -->
          <div class="flex items-center justify-between pb-3">
            <svg
              width="50"
              height="50"
              viewBox="0 0 50 50"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_72_601)">
                <rect width="50" height="50" rx="12"  />
                <path
                  d="M21.8813 37.5C21.8813 37.0896 21.9622 36.6833 22.1192 36.3041C22.2763 35.925 22.5065 35.5805 22.7966 35.2903C23.0868 35.0001 23.4313 34.7699 23.8105 34.6129C24.1896 34.4558 24.596 34.375 25.0063 34.375C25.4167 34.375 25.8231 34.4558 26.2022 34.6129C26.5814 34.7699 26.9259 35.0001 27.2161 35.2903C27.5062 35.5805 27.7364 35.925 27.8935 36.3041C28.0505 36.6833 28.1313 37.0896 28.1313 37.5C28.1313 38.3288 27.8021 39.1237 27.2161 39.7097C26.63 40.2958 25.8351 40.625 25.0063 40.625C24.1775 40.625 23.3827 40.2958 22.7966 39.7097C22.2106 39.1237 21.8813 38.3288 21.8813 37.5ZM22.1876 18.7344C22.146 18.3401 22.1877 17.9415 22.3101 17.5645C22.4325 17.1874 22.6328 16.8403 22.898 16.5456C23.1632 16.2509 23.4874 16.0153 23.8495 15.854C24.2117 15.6927 24.6037 15.6094 25.0001 15.6094C25.3965 15.6094 25.7885 15.6927 26.1507 15.854C26.5128 16.0153 26.837 16.2509 27.1022 16.5456C27.3674 16.8403 27.5677 17.1874 27.6901 17.5645C27.8125 17.9415 27.8542 18.3401 27.8126 18.7344L26.7188 29.6938C26.6821 30.1243 26.4851 30.5254 26.1668 30.8176C25.8486 31.1099 25.4322 31.272 25.0001 31.272C24.568 31.272 24.1516 31.1099 23.8334 30.8176C23.5151 30.5254 23.3181 30.1243 23.2813 29.6938L22.1876 18.7344Z"
                  fill="#FF0000"
                />
              </g>
              <defs>
                <clipPath id="clip0_72_601">
                  <rect width="50" height="50" rx="12" fill="white" />
                </clipPath>
              </defs>
            </svg>
            <p class="text-2xl text-center font-nunito font-bold">Delete item</p>
            <div
              class="z-50 cursor-pointer modal-close"
              @click="openDelete = false"
            >
              <svg
                class="text-black fill-current"
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 18 18"
              >
                <path
                  d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"
                />
              </svg>
            </div>
          </div>

          <!-- Body -->
          <p>Are you sure you want to deleteÂ this item?</p>
          <p>This action cannot be undone.</p>

          <!-- Footer -->
          <div class="flex justify-end pt-2">
            <div class="flex justify-end mt-4 space-x-4">
              <button
                class="px-4 py-2 duration-300 ease-in-out text-primary bg-transparent border-2 border-primary rounded-xl hover:bg-primary hover:outline-random-50 hover:text-white hover:scale-110 hover:delay-300"
                @click="openDelete = false"
              >
                Cancel
              </button>
              <button
                class="px-4 py-2 duration-300 ease-in-out text-white bg-primary border-2 border-primary rounded-xl hover:bg-transparent hover:outline-primary hover:text-primary hover:scale-110 hover:delay-300"
                @click="deleteEvent"
              >
                Delete
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<style>
.modal {
  transition: opacity 0.25s ease;
}
</style>